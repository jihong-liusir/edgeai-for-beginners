<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b6bd5b920b610665fd0462f6b5c2e134",
  "translation_date": "2025-09-18T16:37:48+00:00",
  "source_file": "Module06/03.IntroduceMCP.md",
  "language_code": "sw"
}
-->
# Sehemu ya 03 - Muunganisho wa Itifaki ya Muktadha wa Modeli (MCP)

## Utangulizi wa MCP (Itifaki ya Muktadha wa Modeli)

Itifaki ya Muktadha wa Modeli (MCP) ni mfumo wa kimapinduzi unaowezesha mifano ya lugha kuingiliana na zana na mifumo ya nje kwa njia iliyosawazishwa. Tofauti na mbinu za jadi ambapo mifano huwa imejitenga, MCP huunda daraja kati ya mifano ya AI na ulimwengu halisi kupitia itifaki iliyoelezwa vizuri.

### MCP ni nini?

MCP hutumika kama itifaki ya mawasiliano inayoruhusu mifano ya lugha:
- Kuunganishwa na vyanzo vya data vya nje
- Kutekeleza zana na kazi
- Kuingiliana na API na huduma
- Kupata taarifa za wakati halisi
- Kufanya operesheni ngumu za hatua nyingi

Itifaki hii hubadilisha mifano ya lugha isiyobadilika kuwa mawakala wa nguvu wanaoweza kutekeleza majukumu ya vitendo zaidi ya kizazi cha maandishi.

## Mifano Midogo ya Lugha (SLMs) katika MCP

Mifano Midogo ya Lugha inawakilisha mbinu bora ya utekelezaji wa AI, ikitoa faida kadhaa:

### Faida za SLMs
- **Ufanisi wa Rasilimali**: Mahitaji ya chini ya hesabu
- **Nyakati za Majibu za Haraka**: Kupunguza ucheleweshaji kwa matumizi ya wakati halisi  
- **Gharama Nafuu**: Mahitaji madogo ya miundombinu
- **Faragha**: Inaweza kuendeshwa ndani bila usambazaji wa data
- **Ubinafsishaji**: Rahisi kurekebisha kwa nyanja maalum

### Kwa Nini SLMs Zinafanya Kazi Vizuri na MCP

SLMs zinapounganishwa na MCP huunda mchanganyiko wenye nguvu ambapo uwezo wa kufikiri wa modeli huimarishwa na zana za nje, kufidia idadi yao ndogo ya vigezo kupitia utendaji ulioboreshwa.

## Muhtasari wa Python MCP SDK

Python MCP SDK hutoa msingi wa kujenga programu zinazotumia MCP. SDK inajumuisha:

- **Maktaba za Wateja**: Kwa kuunganishwa na seva za MCP
- **Mfumo wa Seva**: Kwa kuunda seva za MCP maalum
- **Vishikaji vya Itifaki**: Kwa kusimamia mawasiliano
- **Muunganisho wa Zana**: Kwa kutekeleza kazi za nje

## Utekelezaji wa Vitendo: Mteja wa Phi-4 MCP

Hebu tuchunguze utekelezaji wa ulimwengu halisi kwa kutumia modeli ndogo ya Phi-4 ya Microsoft iliyounganishwa na uwezo wa MCP.

### Muundo wa Mfumo

Utekelezaji unafuata muundo wa tabaka:

```
┌─────────────────────────────────────┐
│        Application Layer           │
│  ├── Interactive Loop              │
│  ├── CLI Interface                 │
│  └── Configuration Management      │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│         LLM Client Layer           │
│  ├── OllamaClient                  │
│  ├── VLLMClient                    │
│  └── LLMClient (Abstract)          │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│        MCP Client Layer            │
│  ├── Phi4MiniMCPClient (STDIO)     │
│  ├── Phi4MiniSSEMCPClient (SSE)    │
│  └── BaseMCPClient (Abstract)      │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│      Tool Processing Layer         │
│  ├── ToolCallHandler               │
│  ├── Function Format Transformer   │
│  └── Tool Schema Management        │
└─────────────────────────────────────┘
```

### Vipengele Muhimu

#### 1. Madarasa ya Wateja wa MCP

**BaseMCPClient**: Msingi wa dhana unaotoa utendaji wa kawaida
- Itifaki ya msimamizi wa muktadha wa async
- Ufafanuzi wa kiolesura cha kawaida
- Usimamizi wa rasilimali

**Phi4MiniMCPClient**: Utekelezaji unaotegemea STDIO
- Mawasiliano ya mchakato wa ndani
- Ushughulikiaji wa pembejeo/mazao ya kawaida
- Usimamizi wa mchakato wa chini

**Phi4MiniSSEMCPClient**: Utekelezaji wa Matukio Yanayotumwa na Seva
- Mawasiliano ya utiririshaji wa HTTP
- Ushughulikiaji wa matukio ya wakati halisi
- Muunganisho wa seva wa mtandao

#### 2. Muunganisho wa LLM

**OllamaClient**: Ukaribishaji wa modeli ndani
```python
class OllamaClient(LLMClient):
    def __init__(self):
        self.url = "http://localhost:11434/api/chat"
        self.model_id = "phi4-mini:3.8b-fp16"
```

**VLLMClient**: Utoaji wa utendaji wa juu
```python
class VLLMClient(LLMClient):
    def __init__(self):
        self.url = "http://localhost:8000/v1"
        self.model_id = "microsoft/Phi-4-mini-instruct"
```

#### 3. Njia ya Usindikaji wa Zana

Njia ya usindikaji wa zana hubadilisha zana za MCP kuwa miundo inayolingana na mifano ya lugha:

```python
def transform_functions_format(input_data):
    """Convert MCP tool schemas to LLM-compatible formats"""
    # Maps OpenAPI schemas to function calling schemas
    # Handles parameter type conversion
    # Maintains required field information
```

## Kuanza: Mwongozo wa Hatua kwa Hatua

### Hatua ya 1: Usanidi wa Mazingira

Sakinisha utegemezi unaohitajika:
```bash
pip install fastmcp mcp-python-client openai requests pyautogui Pillow
```

### Hatua ya 2: Usanidi wa Msingi

Sanidi vigezo vya mazingira:
```python
# System Configuration
SYSTEM_PROMPT = "You are an AI assistant with some tools."

# Ollama Configuration (Local)
OLLAMA_URL = "http://localhost:11434/api/chat"
OLLAMA_MODEL_ID = "phi4-mini:3.8b-fp16"

# vLLM Configuration (Server)
VLLM_URL = "http://localhost:8000/v1"
VLLM_MODEL_ID = "microsoft/Phi-4-mini-instruct"
```

### Hatua ya 3: Kuendesha Mteja wako wa Kwanza wa MCP

**Usanidi wa Msingi wa Ollama:**
```bash
python ghmodel_mcp_demo.py
```

**Kutumia Backend ya vLLM:**
```bash
python ghmodel_mcp_demo.py --env vllm
```

**Muunganisho wa Matukio Yanayotumwa na Seva:**
```bash
python ghmodel_mcp_demo.py --run sse
```

**Seva ya MCP Maalum:**
```bash
python ghmodel_mcp_demo.py --server /path/to/server.py
```

### Hatua ya 4: Matumizi ya Kiprogramu

```python
import asyncio
from ghmodel_mcp_demo import OllamaClient, Phi4MiniMCPClient

async def automated_interaction():
    # Configure MCP server parameters
    server_params = StdioServerParameters(
        command="npx",
        args=["@playwright/mcp@latest"],
        env=None,
    )
    
    # Create MCP client and process tools
    async with Phi4MiniMCPClient(server_params) as mcp_client:
        tools = await process_mcp_tools(mcp_client)
        llm_client = OllamaClient()
        
        # Generate response with tool capabilities
        response, messages = await llm_client.generate_response(
            "Help me automate a web task",
            tools
        )
        return response

# Execute the automation
result = asyncio.run(automated_interaction())
print(result)
```

## Vipengele vya Juu

### Msaada wa Backend Nyingi

Utekelezaji unasaidia backend za Ollama na vLLM, ikiruhusu kuchagua kulingana na mahitaji yako:

- **Ollama**: Bora kwa maendeleo ya ndani na majaribio
- **vLLM**: Imeboreshwa kwa uzalishaji na hali za mtiririko wa juu

### Itifaki za Muunganisho Zinazobadilika

Njia mbili za muunganisho zinasaidiwa:

**Hali ya STDIO**: Mawasiliano ya mchakato wa moja kwa moja
- Ucheleweshaji wa chini
- Inafaa kwa zana za ndani
- Usanidi rahisi

**Hali ya SSE**: Utiririshaji unaotegemea HTTP
- Uwezo wa mtandao
- Bora kwa mifumo iliyosambazwa
- Sasisho za wakati halisi

### Uwezo wa Muunganisho wa Zana

Mfumo unaweza kuunganishwa na zana mbalimbali:
- Uendeshaji wa wavuti (Playwright)
- Operesheni za faili
- Mwingiliano wa API
- Amri za mfumo
- Kazi maalum

## Ushughulikiaji wa Makosa na Mazoea Bora

### Usimamizi Kamili wa Makosa

Utekelezaji unajumuisha usimamizi thabiti wa makosa kwa:

**Makosa ya Muunganisho:**
- Kushindwa kwa seva ya MCP
- Muda wa mtandao kuisha
- Masuala ya muunganisho

**Makosa ya Utekelezaji wa Zana:**
- Zana zinazokosekana
- Uthibitishaji wa vigezo
- Kushindwa kwa utekelezaji

**Makosa ya Usindikaji wa Majibu:**
- Masuala ya uchambuzi wa JSON
- Kutolingana kwa muundo
- Upungufu wa majibu ya LLM

### Mazoea Bora

1. **Usimamizi wa Rasilimali**: Tumia wasimamizi wa muktadha wa async
2. **Ushughulikiaji wa Makosa**: Tekeleza vizuizi vya try-catch vya kina
3. **Kuweka Kumbukumbu**: Washa viwango vinavyofaa vya kuweka kumbukumbu
4. **Usalama**: Thibitisha pembejeo na safisha mazao
5. **Utendaji**: Tumia upunguzaji wa muunganisho na uhifadhi

## Matumizi ya Ulimwengu Halisi

### Uendeshaji wa Wavuti
```python
# Example: Automated web testing
async def web_automation_example():
    tools = await setup_playwright_tools()
    response = await llm_client.generate_response(
        "Navigate to example.com and take a screenshot",
        tools
    )
```

### Usindikaji wa Data
```python
# Example: File analysis
async def data_processing_example():
    tools = await setup_file_tools()
    response = await llm_client.generate_response(
        "Analyze the CSV file and generate a summary report",
        tools
    )
```

### Muunganisho wa API
```python
# Example: API interactions
async def api_integration_example():
    tools = await setup_api_tools()
    response = await llm_client.generate_response(
        "Fetch weather data and create a forecast summary",
        tools
    )
```

## Uboreshaji wa Utendaji

### Usimamizi wa Kumbukumbu
- Ushughulikiaji mzuri wa historia ya ujumbe
- Usafi sahihi wa rasilimali
- Upunguzaji wa muunganisho

### Uboreshaji wa Mtandao
- Operesheni za HTTP za async
- Muda wa kusanidi unaoweza kubadilishwa
- Urejeshaji wa makosa kwa neema

### Usindikaji wa Wakati Ule Ule
- I/O isiyozuia
- Utekelezaji wa zana sambamba
- Miundo bora ya async

## Masuala ya Usalama

### Ulinzi wa Data
- Usimamizi salama wa funguo za API
- Uthibitishaji wa pembejeo
- Usafi wa mazao

### Usalama wa Mtandao
- Msaada wa HTTPS
- Chaguo-msingi za ncha za ndani
- Ushughulikiaji salama wa tokeni

### Usalama wa Utekelezaji
- Uchujaji wa zana
- Mazingira yaliyotengwa
- Kuweka kumbukumbu za ukaguzi

## Hitimisho

SLMs zilizounganishwa na MCP zinawakilisha mabadiliko makubwa katika maendeleo ya programu za AI. Kwa kuchanganya ufanisi wa mifano midogo na nguvu ya zana za nje, watengenezaji wanaweza kuunda mifumo ya akili ambayo ni bora kwa rasilimali na yenye uwezo mkubwa.

Utekelezaji wa mteja wa Phi-4 MCP unaonyesha jinsi muunganisho huu unavyoweza kufanikishwa kwa vitendo, ukitoa msingi thabiti wa kujenga programu za AI zilizo na uwezo wa juu.

Mambo muhimu ya kukumbuka:
- MCP huunda daraja kati ya mifano ya lugha na mifumo ya nje
- SLMs hutoa ufanisi bila kupoteza uwezo zinapoongezewa zana
- Muundo wa moduli hurahisisha upanuzi na ubinafsishaji
- Ushughulikiaji sahihi wa makosa na hatua za usalama ni muhimu kwa matumizi ya uzalishaji

Mafunzo haya yanatoa msingi wa kujenga programu zako za MCP zinazotumia SLM, kufungua uwezekano wa uendeshaji wa kiotomatiki, usindikaji wa data, na muunganisho wa mifumo ya akili.

---

**Kanusho**:  
Hati hii imetafsiriwa kwa kutumia huduma ya kutafsiri ya AI [Co-op Translator](https://github.com/Azure/co-op-translator). Ingawa tunajitahidi kuhakikisha usahihi, tafadhali fahamu kuwa tafsiri za kiotomatiki zinaweza kuwa na makosa au kutokuwa sahihi. Hati ya asili katika lugha yake ya awali inapaswa kuzingatiwa kama chanzo cha mamlaka. Kwa taarifa muhimu, tafsiri ya kitaalamu ya binadamu inapendekezwa. Hatutawajibika kwa kutoelewana au tafsiri zisizo sahihi zinazotokana na matumizi ya tafsiri hii.
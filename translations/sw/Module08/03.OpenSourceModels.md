<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "eb6ccbc99954b9db058c3fabdbf39cc5",
  "translation_date": "2025-09-23T00:59:50+00:00",
  "source_file": "Module08/03.OpenSourceModels.md",
  "language_code": "sw"
}
-->
# Kipindi cha 3: Miundo ya Chanzo Huria na Foundry Local

## Muhtasari

Kipindi hiki kinachunguza jinsi ya kuleta miundo ya chanzo huria kwenye Foundry Local: kuchagua miundo ya jamii, kuunganisha maudhui ya Hugging Face, na kutumia mikakati ya "leta modeli yako mwenyewe" (BYOM). Pia utagundua mfululizo wa Model Mondays kwa ajili ya kujifunza endelevu na ugunduzi wa miundo.

Marejeleo:
- Nyaraka za Foundry Local: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/
- Kusanya miundo ya Hugging Face: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/how-to/how-to-compile-hugging-face-models
- Model Mondays: https://aka.ms/model-mondays
- Foundry Local GitHub: https://github.com/microsoft/Foundry-Local

## Malengo ya Kujifunza
- Kugundua na kutathmini miundo ya chanzo huria kwa uendeshaji wa ndani
- Kukusanya na kuendesha miundo teule ya Hugging Face ndani ya Foundry Local
- Kutumia mikakati ya kuchagua miundo kwa usahihi, kasi, na mahitaji ya rasilimali
- Kusimamia miundo kwa ndani kwa kutumia hifadhi ya muda na toleo

## Sehemu ya 1: Ugunduzi na Uchaguzi wa Miundo (Hatua kwa hatua)

Hatua ya 1) Orodhesha miundo inayopatikana katika katalogi ya ndani  
```cmd
foundry model list
```
  
Hatua ya 2) Jaribu haraka miundo miwili (inapakua kiotomatiki mara ya kwanza kuendeshwa)  
```cmd
foundry model run phi-4-mini
foundry model run qwen2.5-7b-instruct
```
  
Hatua ya 3) Angalia vipimo vya msingi  
- Angalia kasi (kihisia) na ubora kwa kutumia maelezo yaliyowekwa  
- Tazama matumizi ya kumbukumbu kupitia Task Manager wakati kila modeli inaendeshwa  

## Sehemu ya 2: Kuendesha Miundo ya Katalogi kupitia CLI (Hatua kwa hatua)

Hatua ya 1) Anzisha modeli  
```cmd
foundry model run llama-3.2
```
  
Hatua ya 2) Tuma maelezo ya majaribio kupitia endpoint inayofanana na OpenAI  
```cmd
curl -X POST http://localhost:8000/v1/chat/completions ^
  -H "Content-Type: application/json" ^
  -d "{\"model\":\"llama-3.2\",\"messages\":[{\"role\":\"user\",\"content\":\"Say hello in 5 words.\"}]}"

```
  

## Sehemu ya 3: BYOM – Kusanya Miundo ya Hugging Face (Hatua kwa hatua)

Fuata mwongozo rasmi wa jinsi ya kukusanya miundo. Mtiririko wa kiwango cha juu hapa chini—tazama makala ya Microsoft Learn kwa amri halisi na usanidi unaoungwa mkono.

Hatua ya 1) Andaa saraka ya kazi  
```cmd
mkdir models
foundry cache cd models
foundry cache ls
```
  
Hatua ya 2) Kusanya modeli ya HF inayoungwa mkono  
- Tumia hatua kutoka kwenye nyaraka za Learn kubadilisha na kuweka modeli ya ONNX iliyokusanywa kwenye saraka yako ya `models`  
- Thibitisha kwa:  
```cmd
foundry cache ls
```
  
Unapaswa kuona jina la modeli yako iliyokusanywa (kwa mfano, `llama-3.2`).  

Hatua ya 3) Endesha modeli iliyokusanywa  
```cmd
foundry model run llama-3.2 --verbose
```
  
Maelezo:  
- Hakikisha kuna nafasi ya kutosha ya diski na RAM kwa kukusanya na kuendesha  
- Anza na miundo midogo ili kuthibitisha mtiririko, kisha ongeza ukubwa  

## Sehemu ya 4: Urekebishaji wa Miundo kwa Vitendo (Hatua kwa hatua)

Hatua ya 1) Unda rejista ya `models.json`  
```json
[
    {"name":"phi-4-mini","task":"chat","min_ram_gb":8,"notes":"fast, great for general chat"},
  {"name":"qwen2.5-7b-instruct","task":"chat","min_ram_gb":16,"notes":"larger context, good reasoning"},
  {"name":"deepseek-r1-distill-qwen-7b","task":"code","min_ram_gb":16,"notes":"coding-oriented"}
]
```
  
Hatua ya 2) Script ndogo ya kuchagua  
```python
# select_model.py
import json, psutil

with open('models.json','r',encoding='utf-8') as f:
    candidates = json.load(f)

ram_gb = psutil.virtual_memory().total / (1024**3)

def select(task: str):
    viable = [m for m in candidates if m['task']==task and ram_gb>=m['min_ram_gb']]
    return viable[0]['name'] if viable else None

print('Selected for chat:', select('chat'))
print('Selected for code:', select('code'))
```
  

## Sehemu ya 5: Vipimo vya Vitendo (Hatua kwa hatua)

Hatua ya 1) Kipimo rahisi cha kasi  
```python
# bench_latency.py
import time, requests

BASE = "http://localhost:8000"

def bench(model, prompt="Explain edge AI in one sentence."):
    start = time.time()
    r = requests.post(f"{BASE}/v1/completions", json={
        "model": model,
        "prompt": prompt,
        "max_tokens": 64
    }, timeout=60)
    elapsed = time.time() - start
    r.raise_for_status()
    return {"model": model, "latency_sec": round(elapsed,3)}

for m in ["phi-4-mini","qwen2.5-7b-instruct","deepseek-r1-distill-qwen-7b"]:
    print(bench(m))
```
  
Hatua ya 2) Ukaguzi wa ubora  
- Tumia seti ya maelezo yaliyowekwa, hifadhi matokeo kwenye CSV/JSON  
- Pima kwa mkono ufasaha, umuhimu, na usahihi (1–5)  

## Sehemu ya 6: Hatua Zinazofuata
- Jiunge na Model Mondays kwa miundo mipya na vidokezo: https://aka.ms/model-mondays  
- Changia matokeo kwenye `models.json` ya timu yako  
- Jiandae kwa Kipindi cha 4: kulinganisha LLMs dhidi ya SLMs, uendeshaji wa ndani dhidi ya wingu, na maonyesho ya vitendo  

---


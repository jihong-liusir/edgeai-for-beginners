<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "e3d7e45c04a9946ff6f9a3358db9ba74",
  "translation_date": "2025-10-01T01:43:50+00:00",
  "source_file": "Module08/03.OpenSourceModels.md",
  "language_code": "sl"
}
-->
# Seja 3: Odkrivanje in upravljanje odprtokodnih modelov

## Pregled

Ta seja se osredotoča na praktično odkrivanje in upravljanje modelov z Foundry Local. Naučili se boste, kako našteti razpoložljive modele, preizkusiti različne možnosti in razumeti osnovne značilnosti zmogljivosti. Pristop poudarja praktično raziskovanje z ukazno vrstico Foundry CLI, da vam pomaga izbrati prave modele za vaše primere uporabe.

## Cilji učenja

- Obvladovanje ukazov Foundry CLI za odkrivanje in upravljanje modelov
- Razumevanje predpomnilnika modelov in vzorcev lokalnega shranjevanja
- Naučiti se hitro preizkusiti in primerjati različne modele
- Ustanoviti praktične delovne procese za izbiro in primerjavo modelov
- Raziskati rastoči ekosistem modelov, ki so na voljo prek Foundry Local

## Predpogoji

- Zaključena seja 1: Začetek z Foundry Local
- Nameščena in dostopna ukazna vrstica Foundry Local CLI
- Dovolj prostora za shranjevanje za prenos modelov (modeli lahko obsegajo od 1 GB do več kot 20 GB)
- Osnovno razumevanje vrst modelov in primerov uporabe

## Pregled

Ta seja raziskuje, kako vključiti odprtokodne modele v Foundry Local.

## Del 6: Praktična vaja

### Vaja: Odkrivanje in primerjava modelov

Ustvarite svoj skript za ocenjevanje modelov na podlagi Vzorca 03:

```cmd
REM create_model_test.cmd
@echo off
echo Model Discovery and Testing Script
echo =====================================

echo.
echo Step 1: List available models
foundry model list

echo.
echo Step 2: Check what's cached
foundry cache list

echo.
echo Step 3: Start phi-4-mini for testing
foundry model run phi-4-mini --verbose

echo.
echo Step 4: Test with a simple prompt
curl -X POST http://localhost:8000/v1/chat/completions ^
  -H "Content-Type: application/json" ^
  -d "{\"model\":\"phi-4-mini\",\"messages\":[{\"role\":\"user\",\"content\":\"Hello, please introduce yourself.\"}],\"max_tokens\":100}"

echo.
echo Model test complete!
```

### Vaša naloga

1. **Zaženite skript Vzorec 03**: `samples\03\list_and_bench.cmd`
2. **Preizkusite različne modele**: Preizkusite vsaj 3 različne modele
3. **Primerjajte zmogljivost**: Zabeležite razlike v hitrosti in kakovosti odziva
4. **Dokumentirajte ugotovitve**: Ustvarite preprosto primerjalno tabelo

### Primer formatiranja primerjave

```
Model Comparison Results:
========================
phi-4-mini:        Fast (~2s), good for general chat
qwen2.5-7b:       Slower (~5s), better reasoning  
deepseek-r1:      Medium (~3s), excellent for code

Recommendation: Start with phi-4-mini for development, 
switch to qwen2.5-7b for production reasoning tasks.
```

## Del 7: Odpravljanje težav in najboljše prakse

### Pogoste težave in rešitve

**Model se ne zažene:**
```cmd
REM Check service status
foundry service status

REM Restart service if needed
foundry service stop
foundry service start

REM Try with verbose output
foundry model run phi-4-mini --verbose
```

**Premalo pomnilnika:**
- Začnite z manjšimi modeli (`phi-4-mini`)
- Zaprite druge aplikacije
- Nadgradite RAM, če pogosto naletite na omejitve

**Počasna zmogljivost:**
- Prepričajte se, da je model popolnoma naložen (preverite podroben izpis)
- Zaprite nepotrebne aplikacije v ozadju
- Razmislite o hitrejšem shranjevanju (SSD)

### Najboljše prakse

1. **Začnite z majhnim**: Začnite z `phi-4-mini`, da preverite nastavitev
2. **En model naenkrat**: Ustavite prejšnje modele, preden zaženete nove
3. **Spremljajte vire**: Bodite pozorni na uporabo pomnilnika
4. **Dosledno testiranje**: Uporabljajte iste pozive za poštene primerjave
5. **Dokumentirajte rezultate**: Beležite zmogljivost modelov za vaše primere uporabe

## Del 8: Naslednji koraki in reference

### Priprava na sejo 4

- **Osredotočenost seje 4**: Orodja in tehnike optimizacije
- **Predpogoji**: Udobje pri preklapljanju med modeli in osnovnem testiranju zmogljivosti
- **Priporočeno**: Identificirajte 2-3 najljubše modele iz te seje

### Dodatni viri

- **[Dokumentacija Foundry Local](https://learn.microsoft.com/azure/ai-foundry/foundry-local/)**: Uradna dokumentacija
- **[Referenca CLI](https://learn.microsoft.com/azure/ai-foundry/foundry-local/reference/reference-cli)**: Popolna referenca ukazov
- **[Model Mondays](https://aka.ms/model-mondays)**: Tedenski poudarki modelov
- **[Foundry Local GitHub](https://github.com/microsoft/Foundry-Local)**: Skupnost in težave
- **[Vzorec 03: Odkrivanje modelov](samples/03/README.md)**: Praktični primer skripta

### Ključne ugotovitve

✅ **Odkrivanje modelov**: Uporabite `foundry model list` za raziskovanje razpoložljivih modelov  
✅ **Hitro testiranje**: Vzorec `list_and_bench.cmd` za hitro ocenjevanje  
✅ **Spremljanje zmogljivosti**: Osnovna uporaba virov in merjenje časa odziva  
✅ **Izbira modelov**: Praktične smernice za izbiro modelov glede na primer uporabe  
✅ **Upravljanje predpomnilnika**: Razumevanje shranjevanja in postopkov čiščenja  

Zdaj imate praktične veščine za odkrivanje, testiranje in izbiro ustreznih modelov za vaše aplikacije AI z enostavnim pristopom ukazne vrstice Foundry Local: izbira modelov skupnosti, integracija vsebine Hugging Face in sprejemanje strategij "prinesi svoj model" (BYOM). Prav tako boste odkrili serijo Model Mondays za stalno učenje in odkrivanje modelov.

Reference:
- Dokumentacija Foundry Local: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/
- Kompilacija modelov Hugging Face: https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-local/how-to/how-to-compile-hugging-face-models
- Model Mondays: https://aka.ms/model-mondays
- Foundry Local GitHub: https://github.com/microsoft/Foundry-Local

## Cilji učenja
- Odkriti in oceniti odprtokodne modele za lokalno sklepanje
- Kompilirati in zagnati izbrane modele Hugging Face znotraj Foundry Local
- Uporabiti strategije izbire modelov za natančnost, zakasnitev in potrebe po virih
- Upravljati modele lokalno s predpomnilnikom in različicami

## Del 1: Odkrivanje modelov z Foundry CLI

### Osnovni ukazi za upravljanje modelov

Ukazna vrstica Foundry CLI ponuja enostavne ukaze za odkrivanje in upravljanje modelov:

```cmd
REM List all available models in the catalog
foundry model list

REM List cached (downloaded) models
foundry cache list

REM Check cache directory location
foundry cache ls
```

### Zagon vaših prvih modelov

Začnite s priljubljenimi, dobro preizkušenimi modeli, da razumete značilnosti zmogljivosti:

```cmd
REM Run Phi-4-Mini (lightweight, fast)
foundry model run phi-4-mini --verbose

REM Run Qwen 2.5 7B (larger, more capable)
foundry model run qwen2.5-7b --verbose

REM Run DeepSeek (specialized for coding)
foundry model run deepseek-r1-7b --verbose
```

**Opomba:** Zastavica `--verbose` zagotavlja podrobne informacije o zagonu, vključno z:
- Napredkom prenosa modela (pri prvem zagonu)
- Podrobnostmi o dodelitvi pomnilnika
- Informacijami o vezavi storitev
- Metričnimi podatki o inicializaciji zmogljivosti

### Razumevanje kategorij modelov

**Majhni jezikovni modeli (SLM):**
- `phi-4-mini`: Hiter, učinkovit, odličen za splošni klepet
- `phi-4`: Bolj zmogljiva različica z boljšim sklepanjem

**Srednji modeli:**
- `qwen2.5-7b`: Odlično sklepanje in daljši kontekst
- `deepseek-r1-7b`: Optimiziran za generiranje kode

**Večji modeli:**
- `llama-3.2`: Najnovejši odprtokodni model Meta
- `qwen2.5-14b`: Razmišljanje na ravni podjetja

## Del 2: Hitro testiranje in primerjava modelov

### Pristop Vzorec 03: Preprosto seznam in primerjava

Na podlagi našega vzorca 03 je tukaj minimalni delovni proces:

```cmd
@echo off
REM Sample 03 - List and bench pattern
echo Listing available models...
foundry model list

echo.
echo Checking cached models...
foundry cache list

echo.
echo Starting phi-4-mini with verbose output...
foundry model run phi-4-mini --verbose
```

### Testiranje zmogljivosti modelov

Ko model deluje, ga preizkusite z doslednimi pozivi:

```cmd
REM Test via curl (Windows Command Prompt)
curl -X POST http://localhost:8000/v1/chat/completions ^
  -H "Content-Type: application/json" ^
  -d "{\"model\":\"phi-4-mini\",\"messages\":[{\"role\":\"user\",\"content\":\"Explain edge AI in one sentence.\"}],\"max_tokens\":50}"
```

### Alternativa testiranja v PowerShellu

```powershell
# PowerShell approach for testing
$body = @{
    model = "phi-4-mini"
    messages = @(
        @{
            role = "user"
            content = "Explain edge AI in one sentence."
        }
    )
    max_tokens = 50
} | ConvertTo-Json -Depth 3

Invoke-RestMethod -Uri "http://localhost:8000/v1/chat/completions" -Method Post -Body $body -ContentType "application/json"
```

## Del 3: Upravljanje predpomnilnika in shranjevanja modelov

### Razumevanje predpomnilnika modelov

Foundry Local samodejno upravlja prenose in predpomnjenje modelov:

```cmd
REM Check cache directory and contents
foundry cache ls

REM View cache location
foundry cache cd

REM Clean up unused models (if needed)
foundry cache clean
```

### Premisleki o shranjevanju modelov

**Tipične velikosti modelov:**
- `phi-4-mini`: ~2,5 GB
- `qwen2.5-7b`: ~4,1 GB  
- `deepseek-r1-7b`: ~4,3 GB
- `llama-3.2`: ~4,9 GB
- `qwen2.5-14b`: ~8,2 GB

**Najboljše prakse shranjevanja:**
- Ohranjajte 2-3 modele v predpomnilniku za hitro preklapljanje
- Odstranite neuporabljene modele za sprostitev prostora: `foundry cache clean`
- Spremljajte uporabo diska, zlasti na manjših SSD-jih
- Razmislite o kompromisih med velikostjo modela in zmogljivostjo

### Spremljanje zmogljivosti modelov

Med delovanjem modelov spremljajte sistemske vire:

**Upravitelj opravil Windows:**
- Spremljajte uporabo pomnilnika (modeli ostanejo naloženi v RAM-u)
- Spremljajte uporabo CPU med sklepanjem
- Preverite diskovni I/O med začetnim nalaganjem modela

**Spremljanje ukazne vrstice:**
```cmd
REM Check memory usage (PowerShell)
Get-Process | Where-Object {$_.ProcessName -like "*foundry*"} | Select-Object ProcessName, WorkingSet64

REM Monitor running models
foundry service ps
```

## Del 4: Praktične smernice za izbiro modelov

### Izbira modelov glede na primer uporabe

**Za splošni klepet in vprašanja in odgovore:**
- Začnite z: `phi-4-mini` (hiter, učinkovit)
- Nadgradite na: `phi-4` (boljše sklepanje)
- Napredno: `qwen2.5-7b` (daljši kontekst)

**Za generiranje kode:**
- Priporočeno: `deepseek-r1-7b`
- Alternativa: `qwen2.5-7b` (prav tako dobro za kodo)

**Za kompleksno sklepanje:**
- Najboljše: `qwen2.5-7b` ali `qwen2.5-14b`
- Proračunska možnost: `phi-4`

### Vodnik po strojnih zahtevah

**Minimalne sistemske zahteve:**
```
phi-4-mini:     8GB RAM,  entry-level CPU
phi-4:         12GB RAM,  mid-range CPU
qwen2.5-7b:    16GB RAM,  mid-range CPU
deepseek-r1:   16GB RAM,  mid-range CPU
qwen2.5-14b:   24GB RAM,  high-end CPU
```

**Priporočeno za najboljšo zmogljivost:**
- 32 GB+ RAM za udobno preklapljanje med modeli
- SSD shranjevanje za hitrejše nalaganje modelov
- Sodobni CPU z dobro zmogljivostjo enojnega jedra
- Podpora za NPU (Windows 11 Copilot+ PC-ji) za pospeševanje

### Delovni proces preklapljanja med modeli

```cmd
REM Stop current model (if needed)
foundry service stop

REM Start different model
foundry model run qwen2.5-7b

REM Verify model is running
foundry service status
```

## Del 5: Preprosto primerjanje modelov

### Osnovno testiranje zmogljivosti

Tukaj je enostaven pristop za primerjavo zmogljivosti modelov:

```python
# simple_bench.py - Based on Sample 03 patterns
import time
import requests
import json

def test_model_response(model_name, prompt="Explain edge AI in one sentence."):
    """Test a single model with a prompt and measure response time."""
    start_time = time.time()
    
    try:
        response = requests.post(
            "http://localhost:8000/v1/chat/completions",
            headers={"Content-Type": "application/json"},
            json={
                "model": model_name,
                "messages": [{"role": "user", "content": prompt}],
                "max_tokens": 64
            },
            timeout=30
        )
        
        elapsed = time.time() - start_time
        
        if response.status_code == 200:
            result = response.json()
            return {
                "model": model_name,
                "latency_sec": round(elapsed, 3),
                "response": result["choices"][0]["message"]["content"],
                "status": "success"
            }
        else:
            return {
                "model": model_name,
                "status": "error",
                "error": f"HTTP {response.status_code}"
            }
            
    except Exception as e:
        return {
            "model": model_name,
            "status": "error", 
            "error": str(e)
        }

# Test the currently running model
if __name__ == "__main__":
    # Test with different models (start each model first)
    test_models = ["phi-4-mini", "qwen2.5-7b", "deepseek-r1-7b"]
    
    print("Model Performance Test")
    print("=" * 50)
    
    for model in test_models:
        print(f"\nTesting {model}...")
        print("Note: Make sure this model is running first with 'foundry model run {model}'")
        
        result = test_model_response(model)
        
        if result["status"] == "success":
            print(f"✅ {model}: {result['latency_sec']}s")
            print(f"   Response: {result['response'][:100]}...")
        else:
            print(f"❌ {model}: {result['error']}")
```

### Ročna ocena kakovosti

Za vsak model preizkusite z doslednimi pozivi in ročno ocenite:

**Testni pozivi:**
1. "Razložite kvantno računalništvo na preprost način."
2. "Napišite funkcijo v Pythonu za razvrščanje seznama."
3. "Kakšne so prednosti in slabosti dela na daljavo?"
4. "Povzemite prednosti robne umetne inteligence."

**Merila ocenjevanja:**
- **Natančnost**: Ali so informacije pravilne?
- **Jasnost**: Ali je razlaga enostavna za razumevanje?
- **Celovitost**: Ali obravnava celotno vprašanje?
- **Hitrost**: Kako hitro se odzove?

### Spremljanje uporabe virov

```cmd
REM Monitor while testing different models
REM Start model
foundry model run phi-4-mini

REM In another terminal, monitor resources
foundry service status
foundry service ps

REM Check system resources (PowerShell)
Get-Process | Where-Object ProcessName -Like "*foundry*" | Format-Table ProcessName, WorkingSet64, CPU
```

## Del 6: Naslednji koraki
- Naročite se na Model Mondays za nove modele in nasvete: https://aka.ms/model-mondays
- Prispevajte ugotovitve v `models.json` vaše ekipe
- Pripravite se na sejo 4: primerjava LLM-jev proti SLM-jem, lokalno proti oblačnemu sklepanju in praktične demonstracije

---

**Omejitev odgovornosti**:  
Ta dokument je bil preveden z uporabo storitve za prevajanje z umetno inteligenco [Co-op Translator](https://github.com/Azure/co-op-translator). Čeprav si prizadevamo za natančnost, vas prosimo, da upoštevate, da lahko avtomatski prevodi vsebujejo napake ali netočnosti. Izvirni dokument v njegovem izvirnem jeziku je treba obravnavati kot avtoritativni vir. Za ključne informacije priporočamo profesionalni človeški prevod. Ne prevzemamo odgovornosti za morebitna napačna razumevanja ali napačne interpretacije, ki izhajajo iz uporabe tega prevoda.
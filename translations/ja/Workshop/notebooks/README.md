<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "6329a09f540b8c37fde11ff6c3ef8c9b",
  "translation_date": "2025-10-08T19:33:17+00:00",
  "source_file": "Workshop/notebooks/README.md",
  "language_code": "ja"
}
-->
# ワークショップノートブック

> **エッジAI学習のためのインタラクティブなJupyterノートブック**
>
> Microsoft Foundry LocalとSmall Language Modelsを使用して、基本的なチャット補完から高度なマルチエージェントシステムまで段階的に学べる自己ペースのチュートリアル。

---

## 📖 はじめに

**初心者向けエッジAIワークショップノートブック**コレクションへようこそ。このインタラクティブなJupyterノートブックでは、リアルタイムでエッジAIコードを記述、実行、実験しながら学ぶことができます。

### なぜJupyterノートブックなのか？

従来のチュートリアルとは異なり、これらのノートブックは以下を提供します：

- **インタラクティブ学習**: コードセルを実行して即座に結果を確認
- **実験**: パラメータを変更してリアルタイムで変化を観察
- **ドキュメント**: コンセプトを説明するインライン解説とMarkdownセル
- **再現性**: 参照や再利用が可能な完全な動作例
- **視覚化**: パフォーマンス指標、埋め込み、結果をインラインで表示

### これらのノートブックの特別な点は？

各ノートブックは**実運用に適したベストプラクティス**に基づいて設計されています：

✅ **包括的なエラーハンドリング** - 優雅な劣化と情報豊富なエラーメッセージ  
✅ **型ヒントとドキュメント** - 明確な関数シグネチャとドックストリング  
✅ **パフォーマンスモニタリング** - トークン使用量の追跡と遅延測定  
✅ **モジュール設計** - プロジェクトに適応可能な再利用可能なパターン  
✅ **段階的な複雑性** - 前のセッションに基づいて体系的に構築  

---

## 🎯 学習目標

### 習得する主要スキル

これらのノートブックを通じて、以下を習得します：

1. **ローカルAIサービス管理**
   - Microsoft Foundry Localサービスの設定と管理
   - ハードウェアに適したモデルの選択とロード
   - リソース使用状況の監視とパフォーマンスの最適化
   - サービス検出とヘルスチェックの処理

2. **AIアプリケーション開発**
   - ローカルでOpenAI互換のチャット補完を実装
   - ユーザー体験を向上させるストリーミングインターフェースの構築
   - Small Language Models向けの効果的なプロンプト設計
   - ローカルモデルをアプリケーションに統合

3. **検索強化生成 (RAG)**
   - ベクトル埋め込みを使用したセマンティック検索の作成
   - LLMの応答をドメイン固有の文書に基づかせる
   - RAGAS指標を使用したRAG品質の評価
   - プロトタイプから本番環境へのスケールアップ

4. **パフォーマンス最適化**
   - 複数モデルを体系的にベンチマーク
   - 遅延、スループット、最初のトークン時間を測定
   - Small Language ModelsとLarge Language Modelsの比較
   - パフォーマンスと品質のトレードオフに基づく最適なモデルの選択

5. **マルチエージェントオーケストレーション**
   - 異なるタスクに特化したエージェントの設計
   - エージェントのメモリとコンテキスト管理の実装
   - 複雑なワークフローで複数エージェントを調整
   - エージェント間の協力を促進するコーディネーターパターンの構築

6. **インテリジェントモデルルーティング**
   - 意図検出とパターンマッチングの実装
   - クエリを適切なモデルに自動的にルーティング
   - マルチステップパイプラインの構築 (計画 → 実行 → 改善)
   - スケーラブルなモデルツールアーキテクチャの設計

---

## 🎓 学習成果

### 作成するもの

| ノートブック | 成果物 | 実証スキル | 難易度 |
|----------|-------------|---------------------|------------|
| **セッション01** | ストリーミング対応のチャットアプリ | サービス設定、基本的な補完、ストリーミングUX | ⭐ 初級 |
| **セッション02 (RAG)** | RAGパイプラインと評価 | 埋め込み、セマンティック検索、品質指標 | ⭐⭐ 中級 |
| **セッション02 (評価)** | RAG品質評価ツール | RAGAS指標、体系的評価 | ⭐⭐ 中級 |
| **セッション03** | マルチモデルベンチマーク | パフォーマンス測定、モデル比較 | ⭐⭐ 中級 |
| **セッション04** | SLM vs LLM比較ツール | トレードオフ分析、最適化戦略 | ⭐⭐⭐ 上級 |
| **セッション05** | マルチエージェントオーケストレーター | エージェント設計、メモリ、調整 | ⭐⭐⭐ 上級 |
| **セッション06 (ルーター)** | インテリジェントルーティングシステム | 意図検出、モデル選択 | ⭐⭐⭐ 上級 |
| **セッション06 (パイプライン)** | マルチステップパイプライン | 計画/実行/改善ワークフロー | ⭐⭐⭐ 上級 |

### 能力進捗

```
Session 01 ────► Session 02 ────► Session 03 ────► Session 04 ────► Session 05-06
   Basic            RAG             Benchmarking      Comparison      Multi-Agent
   Chat             Systems         & Performance     & Optimization  Orchestration
   
Foundation    │   Intermediate   │   Advanced       │   Expert
──────────────┴──────────────────┴──────────────────┴──────────────►
```

---

## 📅 ワークショップスケジュール

### 🚀 半日ワークショップ (3.5時間)

**対象: チームトレーニングセッション、ハッカソン、カンファレンスワークショップ**

| 時間 | 所要時間 | セッション | トピック | アクティビティ |
|------|----------|---------|--------|------------|
| **0:00** | 30分 | セットアップとイントロ | 環境設定、Foundry Localインストール | 依存関係のインストール、セットアップ確認 |
| **0:30** | 30分 | セッション01 | 基本的なチャット補完、ストリーミング | ノートブック実行、プロンプト変更 |
| **1:00** | 45分 | セッション02 | RAGパイプライン、埋め込み、評価 | RAGシステム構築、クエリテスト |
| **1:45** | 15分 | 休憩 | ☕ コーヒーと質問 | — |
| **2:00** | 30分 | セッション03 | マルチモデルベンチマーク | 3つ以上のモデルを比較 |
| **2:30** | 30分 | セッション04 | SLM vs LLMトレードオフ | パフォーマンス/品質分析 |
| **3:00** | 30分 | セッション05-06 | マルチエージェントシステムとルーティング | 高度なパターンを探る |

**成果物**: 参加者は6つのエッジAIアプリケーションと実運用コードパターンを持ち帰ります。

---

### 🎓 1日ワークショップ (6時間)

**対象: 詳細なトレーニング、ブートキャンプ、大学コース**

| 時間 | 所要時間 | セッション | トピック | アクティビティ |
|------|----------|---------|--------|------------|
| **0:00** | 45分 | セットアップと理論 | 環境設定、エッジAIの基礎 | インストール、確認、ユースケースの議論 |
| **0:45** | 45分 | セッション01 | チャット補完の深掘り | 基本的およびストリーミングチャットの実装 |
| **1:30** | 30分 | 休憩 | ☕ コーヒーとネットワーキング | — |
| **2:00** | 60分 | セッション02 (両方) | RAGパイプライン + RAGAS評価 | 完全なRAGシステム構築 |
| **3:00** | 30分 | ハンズオンラボ1 | ドメイン固有のカスタムRAG | 自分の文書に適用 |
| **3:30** | 30分 | 昼食 | 🍽️ | — |
| **4:00** | 45分 | セッション03 | ベンチマーク方法論 | 体系的なモデル比較 |
| **4:45** | 45分 | セッション04 | 最適化戦略 | SLM vs LLM分析 |
| **5:30** | 60分 | セッション05-06 | 高度なオーケストレーション | マルチエージェントシステム、ルーティング |
| **6:30** | 30分 | ハンズオンラボ2 | カスタムエージェントシステム構築 | 独自のオーケストレーター設計 |

**成果物**: エッジAIパターンの深い理解と2つのカスタムプロジェクト。

---

### 📚 自己ペース学習 (2週間)

**対象: 個人学習者、オンラインコース、自己学習**

#### 1週目: 基礎 (6時間)

| 日 | フォーカス | 所要時間 | ノートブック | 宿題 |
|-----|-------|----------|-----------|----------|
| **月** | セットアップと基礎 | 1.5時間 | セッション01 | プロンプト変更、ストリーミングテスト |
| **水** | RAGの基礎 | 2時間 | セッション02 (両方) | 自分の文書を追加 |
| **金** | ベンチマーク | 1.5時間 | セッション03 | 追加モデルを比較 |
| **土** | レビューと練習 | 1時間 | 1週目全体 | 演習完了、デバッグ |

#### 2週目: 高度 (5時間)

| 日 | フォーカス | 所要時間 | ノートブック | 宿題 |
|-----|-------|----------|-----------|----------|
| **月** | 最適化 | 1.5時間 | セッション04 | トレードオフを文書化 |
| **水** | マルチエージェントシステム | 2時間 | セッション05 | カスタムエージェント設計 |
| **金** | インテリジェントルーティング | 1.5時間 | セッション06 (両方) | ルーティングロジック構築 |
| **土** | 最終プロジェクト | 2時間 | 統合 | 複数パターンを組み合わせ |

**成果物**: エッジAIパターンの習得とポートフォリオプロジェクト。

---

## 📔 ノートブックの説明

### 📘 セッション01: チャットブートストラップ
**ファイル**: `session01_chat_bootstrap.ipynb`  
**所要時間**: 20-30分  
**前提条件**: なし  
**難易度**: ⭐ 初級

**学ぶこと**:
- Foundry Local Python SDKのインストールと設定
- `FoundryLocalManager`を使用した自動サービス検出
- OpenAI互換APIを使用した基本的なチャット補完の実装
- ユーザー体験を向上させるストリーミング応答の構築
- エラーとサービスの利用不可を優雅に処理

**主要コンセプト**: サービス管理、チャット補完、ストリーミング、エラーハンドリング

**作成するもの**: ストリーミング対応のインタラクティブチャットアプリケーション

---

### 📗 セッション02: RAGパイプライン
**ファイル**: `session02_rag_pipeline.ipynb`  
**所要時間**: 30-45分  
**前提条件**: セッション01  
**難易度**: ⭐⭐ 中級

**学ぶこと**:
- 検索強化生成 (RAG) パターンの実装
- sentence-transformersを使用したベクトル埋め込みの作成
- コサイン類似度を使用したセマンティック検索の構築
- ドメイン文書に基づいたLLM応答の生成
- インポートガードを使用したオプション依存関係の処理

**主要コンセプト**: RAGアーキテクチャ、埋め込み、セマンティック検索、ベクトル類似度

**作成するもの**: 文書に基づいた質問応答システム

---

### 📗 セッション02: RAG評価とRAGAS
**ファイル**: `session02_rag_eval_ragas.ipynb`  
**所要時間**: 30-45分  
**前提条件**: セッション02 RAGパイプライン  
**難易度**: ⭐⭐ 中級

**学ぶこと**:
- 業界標準の指標を使用したRAG品質の評価
- コンテキストの関連性、回答の関連性、忠実性を測定
- RAGASフレームワークを使用した体系的評価
- RAG品質問題の特定と修正
- ドメイン固有の評価データセットの構築

**主要コンセプト**: RAG評価、RAGAS指標、品質測定、体系的テスト

**作成するもの**: RAG品質評価フレームワーク

---

### 📙 セッション03: OSSモデルのベンチマーク
**ファイル**: `session03_benchmark_oss_models.ipynb`  
**所要時間**: 30-45分  
**前提条件**: セッション01  
**難易度**: ⭐⭐ 中級

**学ぶこと**:
- 複数モデルを体系的にベンチマーク
- 遅延、スループット、最初のトークン時間を測定
- モデル障害に対する優雅な劣化を実装
- モデルファミリー間のパフォーマンス比較
- ベンチマーク結果の視覚化と分析

**主要コンセプト**: パフォーマンスベンチマーク、遅延測定、モデル比較、統計分析

**作成するもの**: マルチモデルベンチマークスイート

---

### 📙 セッション04: モデル比較 (SLM vs LLM)
**ファイル**: `session04_model_compare.ipynb`  
**所要時間**: 30-45分  
**前提条件**: セッション01、03  
**難易度**: ⭐⭐⭐ 上級

**学ぶこと**:
- Small Language ModelsとLarge Language Modelsの比較
- パフォーマンスと品質のトレードオフ分析
- エッジ適合性指標の測定
- 展開制約に基づく最適なモデルの選択
- モデル選択の意思決定基準を文書化

**主要コンセプト**: モデル選択、トレードオフ分析、最適化戦略、展開計画

**作成するもの**: SLM vs LLM比較フレームワーク

---

### 📕 セッション05: マルチエージェントオーケストレーター
**ファイル**: `session05_agents_orchestrator.ipynb`  
**所要時間**: 45-60分  
**前提条件**: セッション01-02  
**難易度**: ⭐⭐⭐ 上級

**学ぶこと**:
- 異なるタスクに特化したエージェントの設計
- エージェントのメモリとコンテキスト管理の実装
- エージェント間の協力を促進するコーディネーターパターンの構築
- エージェントの通信と引き継ぎの処理
- マルチエージェントシステムのパフォーマンス監視

**主要コンセプト**: エージェントアーキテクチャ、コーディネーターパターン、メモリ管理、エージェントオーケストレーション

**作成するもの**: コーディネーターと専門エージェントを備えたマルチエージェントシステム

---

### 📕 セッション06: モデルルーター
**ファイル**: `session06_models_router.ipynb`  
**所要時間**: 30-45分  
**前提条件**: セッション01、03  
**難易度**: ⭐⭐⭐ 上級

**学ぶこと**:
- 意図検出とパターンマッチングの実装
- キーワードベースのモデルルーティング
- スケーラブルなモデルツールアーキテクチャの設計

**重要な概念**: パイプラインアーキテクチャ、マルチステージ処理、エラー回復、スケーラビリティパターン

**構築するもの**: ルーティングを備えたマルチステップのインテリジェントパイプライン

---

## 🚀 はじめに

### 前提条件

**システム要件**:
- **OS**: Windows 10/11、macOS 11+、または Linux (Ubuntu 20.04+)
- **RAM**: 最低8GB、推奨16GB以上
- **ストレージ**: モデル用に10GB以上の空き容量
- **ハードウェア**: AVX2対応CPU; GPU (CUDA、Qualcomm NPU) はオプション

**ソフトウェア要件**:
- **Python 3.8以上** (pip付き)
- **Jupyter Notebook** または **VS Code** (Jupyter拡張機能付き)
- **Microsoft Foundry Local** のインストールと設定済み
- **Git** (リポジトリのクローン用)

### インストール手順

#### 1. Foundry Local のインストール

**Windows**:
```cmd
winget install Microsoft.FoundryLocal
```

**macOS**:
```bash
brew tap microsoft/foundrylocal
brew install foundrylocal
```

**インストール確認**:
```bash
foundry --version
```

#### 2. Python環境のセットアップ

```bash
# Navigate to Workshop directory
cd Workshop

# Create virtual environment
python -m venv .venv

# Activate virtual environment
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

#### 3. Foundry Local の起動

```bash
# Load a model (auto-downloads if needed)
foundry model run phi-4-mini

# Verify service is running
foundry service status
```

#### 4. Jupyter の起動

```bash
# Start Jupyter Notebook
jupyter notebook notebooks/

# Or use VS Code with Jupyter extension
code notebooks/
```

### 簡易確認

Pythonセルで以下を実行してセットアップを確認してください:

```python
from foundry_local import FoundryLocalManager
import openai

# Initialize manager (auto-discovers service)
manager = FoundryLocalManager("phi-4-mini")

# Configure OpenAI client
client = openai.OpenAI(
    base_url=manager.endpoint,
    api_key=manager.api_key
)

# Test chat completion
response = client.chat.completions.create(
    model=manager.get_model_info("phi-4-mini").id,
    messages=[{"role": "user", "content": "Hello!"}]
)

print(response.choices[0].message.content)
```

**期待される出力**: ローカルモデルからの挨拶メッセージ。

---

## 📝 ワークショップのベストプラクティス

### インストラクター向け

**ワークショップ前**:
- ✅ インストール手順を1週間前に送信
- ✅ 対象ハードウェアで全ノートブックをテスト
- ✅ よくある問題のトラブルシューティングガイドを準備
- ✅ 予備モデルを用意 (phi-4-miniが失敗した場合はphi-3.5-mini)
- ✅ 質問用の共有チャットチャンネルを設定

**ワークショップ中**:
- ✅ 環境チェックを迅速に実施 (5分)
- ✅ トラブルシューティングリソースを即座に共有
- ✅ 実験や変更を奨励
- ✅ 休憩を戦略的に活用 (2セッションごと)
- ✅ TAを配置して1対1のサポートを提供

**ワークショップ後**:
- ✅ 完全な動作ノートブックと解答を共有
- ✅ 追加リソースへのリンクを提供
- ✅ 改善のためのフィードバック調査を作成
- ✅ フォローアップ質問のためのオフィスアワーを提供

### 学習者向け

**学習を最大化する方法**:
- ✅ ワークショップ開始前にセットアップを完了
- ✅ コードセルをすべて自分で実行 (読むだけではなく)
- ✅ パラメータやプロンプトを試してみる
- ✅ 気づきや注意点をメモする
- ✅ 困ったときは質問する (他の人も同じ質問をしている可能性あり)

**避けるべき一般的な落とし穴**:
- ❌ セルの実行順序を飛ばす (順番に実行)
- ❌ エラーメッセージを注意深く読まない
- ❌ 理解せずに急いで進める
- ❌ Markdownの説明を無視する
- ❌ 修正したノートブックを保存しない

**デバッグのヒント**:
1. **サービスが動作していない**: `foundry service status` を確認
2. **インポートエラー**: 仮想環境が有効化されているか確認
3. **モデルが見つからない**: `foundry model ls` を実行してロード済みモデルを確認
4. **動作が遅い**: RAM使用量を確認し、他のアプリケーションを閉じる
5. **予期しない結果**: カーネルを再起動し、すべてのセルを上から実行

---

## 🔗 追加リソース

### ワークショップ資料

- **[ワークショップメインガイド](../Readme.md)** - 概要、学習目標、キャリア成果
- **[Pythonサンプル](../../../../Workshop/samples)** - 各セッションに対応するPythonスクリプト
- **[セッションガイド](../../../../Workshop)** - 詳細なMarkdownガイド (Session01-06)
- **[スクリプト](../../../../Workshop/scripts)** - 検証とテストユーティリティ
- **[トラブルシューティング](./TROUBLESHOOTING.md)** - よくある問題と解決策
- **[クイックスタート](./quickstart.md)** - 迅速な開始ガイド

### ドキュメント

- **[Foundry Local Docs](https://learn.microsoft.com/azure/ai-foundry/foundry-local/)** - Microsoft公式ドキュメント
- **[OpenAI Python SDK](https://github.com/openai/openai-python)** - OpenAI SDKリファレンス
- **[Sentence Transformers](https://www.sbert.net/)** - 埋め込みモデルのドキュメント
- **[RAGAS Framework](https://docs.ragas.io/)** - RAG評価指標

### コミュニティ

- **[GitHub Discussions](https://github.com/microsoft/edgeai-for-beginners/discussions)** - 質問やプロジェクト共有
- **[Azure AI Foundry Discord](https://discord.com/invite/ByRwuEEgH4)** - リアルタイムのコミュニティサポート
- **[Stack Overflow](https://stackoverflow.com/questions/tagged/foundry-local)** - 技術的なQ&A

---

## 🎯 学習パスのおすすめ

### 初級トラック (ここから始める)

1. **Session 01** - チャットブートストラップ
2. **Session 02** - RAGパイプライン
3. **Session 03** - モデルのベンチマーク

**時間**: 約2時間 | **フォーカス**: 基本的なパターン

---

### 中級トラック

1. 初級トラックを完了
2. **Session 02** - RAG評価
3. **Session 04** - モデル比較

**時間**: 約4時間 | **フォーカス**: 品質と最適化

---

### 上級トラック (フルワークショップ)

1. 中級トラックを完了
2. **Session 05** - マルチエージェントオーケストレーター
3. **Session 06** - モデルルーター
4. **Session 06** - マルチステップパイプライン

**時間**: 約6時間 | **フォーカス**: 実運用パターン

---

### カスタムプロジェクトトラック

1. 初級トラック (Session 01-03) を完了
2. 目標に応じて1つの上級セッションを選択:
   - **RAGアプリを構築したい場合** → Session 02 評価
   - **パフォーマンスを最適化したい場合** → Session 04 比較
   - **複雑なワークフローを扱いたい場合** → Session 05 オーケストレーター
   - **スケーラブルなアーキテクチャを構築したい場合** → Session 06 ルーター + パイプライン

**時間**: 約3時間 | **フォーカス**: プロジェクト特化スキル

---

## 📊 成功指標

以下のマイルストーンで進捗を追跡:

- [ ] **セットアップ完了** - Foundry Localが動作し、すべての依存関係がインストール済み
- [ ] **最初のチャット** - Session 01を完了し、ストリーミングチャットが動作
- [ ] **RAG構築** - Session 02を完了し、ドキュメントQAシステムが機能
- [ ] **モデルのベンチマーク** - Session 03を完了し、パフォーマンスデータを収集
- [ ] **トレードオフの分析** - Session 04を完了し、モデル選択基準を文書化
- [ ] **エージェントのオーケストレーション** - Session 05を完了し、マルチエージェントシステムが動作
- [ ] **ルーティングの実装** - Session 06を完了し、インテリジェントなモデル選択が機能
- [ ] **カスタムプロジェクト** - ワークショップのパターンを自身のユースケースに適用

---

## 🤝 コントリビューション

問題を見つけたり提案がある場合は、ぜひ貢献してください！

- **問題の報告**: [GitHub Issues](https://github.com/microsoft/edgeai-for-beginners/issues)
- **改善案の提案**: [GitHub Discussions](https://github.com/microsoft/edgeai-for-beginners/discussions)
- **PRの提出**: [Contributing Guidelines](../../AGENTS.md) に従ってください

---

## 📄 ライセンス

このワークショップは [EdgeAI for Beginners](https://github.com/microsoft/edgeai-for-beginners) リポジトリの一部であり、[MIT License](../../../../LICENSE) の下でライセンスされています。

---

**実運用向けのEdge AIアプリケーションを構築する準備はできましたか？**  
**[Session 01: Chat Bootstrap](./session01_chat_bootstrap.ipynb) から始めましょう →**

---

*最終更新日: 2025年10月8日 | ワークショップバージョン: 2.0*

---

**免責事項**:  
この文書は、AI翻訳サービス[Co-op Translator](https://github.com/Azure/co-op-translator)を使用して翻訳されています。正確性を追求しておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があることをご承知ください。元の言語で記載された文書が正式な情報源とみなされるべきです。重要な情報については、専門の人間による翻訳を推奨します。この翻訳の使用に起因する誤解や誤解釈について、当方は責任を負いません。
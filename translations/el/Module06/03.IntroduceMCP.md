<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b6bd5b920b610665fd0462f6b5c2e134",
  "translation_date": "2025-09-18T07:29:58+00:00",
  "source_file": "Module06/03.IntroduceMCP.md",
  "language_code": "el"
}
-->
# Ενότητα 03 - Ενσωμάτωση Πρωτοκόλλου Πλαισίου Μοντέλου (MCP)

## Εισαγωγή στο MCP (Πρωτόκολλο Πλαισίου Μοντέλου)

Το Πρωτόκολλο Πλαισίου Μοντέλου (MCP) είναι ένα επαναστατικό πλαίσιο που επιτρέπει στα γλωσσικά μοντέλα να αλληλεπιδρούν με εξωτερικά εργαλεία και συστήματα με έναν τυποποιημένο τρόπο. Σε αντίθεση με τις παραδοσιακές προσεγγίσεις όπου τα μοντέλα είναι απομονωμένα, το MCP δημιουργεί μια γέφυρα μεταξύ των μοντέλων AI και του πραγματικού κόσμου μέσω ενός καλά καθορισμένου πρωτοκόλλου.

### Τι είναι το MCP;

Το MCP λειτουργεί ως πρωτόκολλο επικοινωνίας που επιτρέπει στα γλωσσικά μοντέλα να:
- Συνδέονται με εξωτερικές πηγές δεδομένων
- Εκτελούν εργαλεία και λειτουργίες
- Αλληλεπιδρούν με APIs και υπηρεσίες
- Έχουν πρόσβαση σε πληροφορίες σε πραγματικό χρόνο
- Εκτελούν σύνθετες λειτουργίες πολλών βημάτων

Αυτό το πρωτόκολλο μετατρέπει τα στατικά γλωσσικά μοντέλα σε δυναμικούς πράκτορες που μπορούν να εκτελούν πρακτικές εργασίες πέρα από τη δημιουργία κειμένου.

## Μικρά Γλωσσικά Μοντέλα (SLMs) στο MCP

Τα Μικρά Γλωσσικά Μοντέλα αντιπροσωπεύουν μια αποδοτική προσέγγιση στην ανάπτυξη AI, προσφέροντας αρκετά πλεονεκτήματα:

### Πλεονεκτήματα των SLMs
- **Αποδοτικότητα Πόρων**: Χαμηλότερες απαιτήσεις υπολογιστικής ισχύος
- **Ταχύτεροι Χρόνοι Απόκρισης**: Μειωμένη καθυστέρηση για εφαρμογές σε πραγματικό χρόνο  
- **Οικονομική Αποδοτικότητα**: Ελάχιστες ανάγκες υποδομής
- **Απόρρητο**: Μπορούν να λειτουργούν τοπικά χωρίς μετάδοση δεδομένων
- **Προσαρμογή**: Ευκολότερη προσαρμογή για συγκεκριμένους τομείς

### Γιατί τα SLMs λειτουργούν καλά με το MCP

Τα SLMs σε συνδυασμό με το MCP δημιουργούν έναν ισχυρό συνδυασμό όπου οι δυνατότητες λογικής του μοντέλου ενισχύονται από εξωτερικά εργαλεία, αντισταθμίζοντας τον μικρότερο αριθμό παραμέτρων τους μέσω αυξημένης λειτουργικότητας.

## Επισκόπηση Python MCP SDK

Το Python MCP SDK παρέχει τη βάση για την ανάπτυξη εφαρμογών με δυνατότητες MCP. Το SDK περιλαμβάνει:

- **Βιβλιοθήκες Πελάτη**: Για σύνδεση με MCP servers
- **Πλαίσιο Server**: Για δημιουργία προσαρμοσμένων MCP servers
- **Διαχειριστές Πρωτοκόλλου**: Για διαχείριση επικοινωνίας
- **Ενσωμάτωση Εργαλείων**: Για εκτέλεση εξωτερικών λειτουργιών

## Πρακτική Εφαρμογή: Πελάτης MCP Phi-4

Ας εξερευνήσουμε μια πραγματική εφαρμογή χρησιμοποιώντας το mini μοντέλο Phi-4 της Microsoft με δυνατότητες MCP.

### Αρχιτεκτονική Συστήματος

Η εφαρμογή ακολουθεί μια πολυεπίπεδη αρχιτεκτονική:

```
┌─────────────────────────────────────┐
│        Application Layer           │
│  ├── Interactive Loop              │
│  ├── CLI Interface                 │
│  └── Configuration Management      │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│         LLM Client Layer           │
│  ├── OllamaClient                  │
│  ├── VLLMClient                    │
│  └── LLMClient (Abstract)          │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│        MCP Client Layer            │
│  ├── Phi4MiniMCPClient (STDIO)     │
│  ├── Phi4MiniSSEMCPClient (SSE)    │
│  └── BaseMCPClient (Abstract)      │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│      Tool Processing Layer         │
│  ├── ToolCallHandler               │
│  ├── Function Format Transformer   │
│  └── Tool Schema Management        │
└─────────────────────────────────────┘
```

### Βασικά Στοιχεία

#### 1. Κλάσεις Πελάτη MCP

**BaseMCPClient**: Αφηρημένη βάση που παρέχει κοινή λειτουργικότητα
- Πρωτόκολλο ασύγχρονου διαχειριστή πλαισίου
- Τυποποιημένος ορισμός διεπαφής
- Διαχείριση πόρων

**Phi4MiniMCPClient**: Υλοποίηση βασισμένη στο STDIO
- Επικοινωνία τοπικής διεργασίας
- Διαχείριση εισόδου/εξόδου
- Διαχείριση υποδιεργασιών

**Phi4MiniSSEMCPClient**: Υλοποίηση Server-Sent Events
- Επικοινωνία μέσω HTTP streaming
- Διαχείριση γεγονότων σε πραγματικό χρόνο
- Συνδεσιμότητα με web-based servers

#### 2. Ενσωμάτωση LLM

**OllamaClient**: Τοπική φιλοξενία μοντέλου
```python
class OllamaClient(LLMClient):
    def __init__(self):
        self.url = "http://localhost:11434/api/chat"
        self.model_id = "phi4-mini:3.8b-fp16"
```

**VLLMClient**: Υψηλής απόδοσης εξυπηρέτηση
```python
class VLLMClient(LLMClient):
    def __init__(self):
        self.url = "http://localhost:8000/v1"
        self.model_id = "microsoft/Phi-4-mini-instruct"
```

#### 3. Αγωγός Επεξεργασίας Εργαλείων

Ο αγωγός επεξεργασίας εργαλείων μετατρέπει τα εργαλεία MCP σε μορφές συμβατές με γλωσσικά μοντέλα:

```python
def transform_functions_format(input_data):
    """Convert MCP tool schemas to LLM-compatible formats"""
    # Maps OpenAPI schemas to function calling schemas
    # Handles parameter type conversion
    # Maintains required field information
```

## Ξεκινώντας: Οδηγός Βήμα-Βήμα

### Βήμα 1: Ρύθμιση Περιβάλλοντος

Εγκαταστήστε τις απαιτούμενες εξαρτήσεις:
```bash
pip install fastmcp mcp-python-client openai requests pyautogui Pillow
```

### Βήμα 2: Βασική Διαμόρφωση

Ρυθμίστε τις μεταβλητές περιβάλλοντος:
```python
# System Configuration
SYSTEM_PROMPT = "You are an AI assistant with some tools."

# Ollama Configuration (Local)
OLLAMA_URL = "http://localhost:11434/api/chat"
OLLAMA_MODEL_ID = "phi4-mini:3.8b-fp16"

# vLLM Configuration (Server)
VLLM_URL = "http://localhost:8000/v1"
VLLM_MODEL_ID = "microsoft/Phi-4-mini-instruct"
```

### Βήμα 3: Εκτέλεση του Πρώτου Πελάτη MCP

**Βασική Ρύθμιση Ollama:**
```bash
python ghmodel_mcp_demo.py
```

**Χρήση Backend vLLM:**
```bash
python ghmodel_mcp_demo.py --env vllm
```

**Σύνδεση Server-Sent Events:**
```bash
python ghmodel_mcp_demo.py --run sse
```

**Προσαρμοσμένος MCP Server:**
```bash
python ghmodel_mcp_demo.py --server /path/to/server.py
```

### Βήμα 4: Προγραμματική Χρήση

```python
import asyncio
from ghmodel_mcp_demo import OllamaClient, Phi4MiniMCPClient

async def automated_interaction():
    # Configure MCP server parameters
    server_params = StdioServerParameters(
        command="npx",
        args=["@playwright/mcp@latest"],
        env=None,
    )
    
    # Create MCP client and process tools
    async with Phi4MiniMCPClient(server_params) as mcp_client:
        tools = await process_mcp_tools(mcp_client)
        llm_client = OllamaClient()
        
        # Generate response with tool capabilities
        response, messages = await llm_client.generate_response(
            "Help me automate a web task",
            tools
        )
        return response

# Execute the automation
result = asyncio.run(automated_interaction())
print(result)
```

## Προηγμένες Δυνατότητες

### Υποστήριξη Πολλαπλών Backends

Η υλοποίηση υποστηρίζει τόσο τα Ollama όσο και τα vLLM backends, επιτρέποντάς σας να επιλέξετε ανάλογα με τις απαιτήσεις σας:

- **Ollama**: Καλύτερο για τοπική ανάπτυξη και δοκιμές
- **vLLM**: Βελτιστοποιημένο για παραγωγή και σενάρια υψηλής απόδοσης

### Ευέλικτα Πρωτόκολλα Σύνδεσης

Υποστηρίζονται δύο τρόποι σύνδεσης:

**Λειτουργία STDIO**: Άμεση επικοινωνία διεργασίας
- Χαμηλότερη καθυστέρηση
- Κατάλληλο για τοπικά εργαλεία
- Απλή ρύθμιση

**Λειτουργία SSE**: Streaming μέσω HTTP
- Δυνατότητα δικτύου
- Καλύτερο για κατανεμημένα συστήματα
- Ενημερώσεις σε πραγματικό χρόνο

### Δυνατότητες Ενσωμάτωσης Εργαλείων

Το σύστημα μπορεί να ενσωματωθεί με διάφορα εργαλεία:
- Αυτοματοποίηση web (Playwright)
- Λειτουργίες αρχείων
- Αλληλεπιδράσεις API
- Εντολές συστήματος
- Προσαρμοσμένες λειτουργίες

## Διαχείριση Σφαλμάτων και Βέλτιστες Πρακτικές

### Ολοκληρωμένη Διαχείριση Σφαλμάτων

Η υλοποίηση περιλαμβάνει ισχυρή διαχείριση σφαλμάτων για:

**Σφάλματα Σύνδεσης:**
- Αποτυχίες MCP server
- Χρονικά όρια δικτύου
- Προβλήματα συνδεσιμότητας

**Σφάλματα Εκτέλεσης Εργαλείων:**
- Ελλείποντα εργαλεία
- Επικύρωση παραμέτρων
- Αποτυχίες εκτέλεσης

**Σφάλματα Επεξεργασίας Απαντήσεων:**
- Προβλήματα ανάλυσης JSON
- Ασυνέπειες μορφής
- Ανωμαλίες απαντήσεων LLM

### Βέλτιστες Πρακτικές

1. **Διαχείριση Πόρων**: Χρησιμοποιήστε ασύγχρονους διαχειριστές πλαισίου
2. **Διαχείριση Σφαλμάτων**: Εφαρμόστε ολοκληρωμένα try-catch blocks
3. **Καταγραφή**: Ενεργοποιήστε κατάλληλα επίπεδα καταγραφής
4. **Ασφάλεια**: Επικυρώστε εισόδους και καθαρίστε εξόδους
5. **Απόδοση**: Χρησιμοποιήστε pooling συνδέσεων και caching

## Εφαρμογές στον Πραγματικό Κόσμο

### Αυτοματοποίηση Web
```python
# Example: Automated web testing
async def web_automation_example():
    tools = await setup_playwright_tools()
    response = await llm_client.generate_response(
        "Navigate to example.com and take a screenshot",
        tools
    )
```

### Επεξεργασία Δεδομένων
```python
# Example: File analysis
async def data_processing_example():
    tools = await setup_file_tools()
    response = await llm_client.generate_response(
        "Analyze the CSV file and generate a summary report",
        tools
    )
```

### Ενσωμάτωση API
```python
# Example: API interactions
async def api_integration_example():
    tools = await setup_api_tools()
    response = await llm_client.generate_response(
        "Fetch weather data and create a forecast summary",
        tools
    )
```

## Βελτιστοποίηση Απόδοσης

### Διαχείριση Μνήμης
- Αποδοτική διαχείριση ιστορικού μηνυμάτων
- Σωστός καθαρισμός πόρων
- Pooling συνδέσεων

### Βελτιστοποίηση Δικτύου
- Ασύγχρονες λειτουργίες HTTP
- Ρυθμιζόμενα χρονικά όρια
- Ομαλή ανάκτηση σφαλμάτων

### Παράλληλη Επεξεργασία
- Μη μπλοκαρισμένο I/O
- Παράλληλη εκτέλεση εργαλείων
- Αποδοτικά ασύγχρονα μοτίβα

## Σκέψεις Ασφαλείας

### Προστασία Δεδομένων
- Ασφαλής διαχείριση κλειδιών API
- Επικύρωση εισόδων
- Καθαρισμός εξόδων

### Ασφάλεια Δικτύου
- Υποστήριξη HTTPS
- Προεπιλογές τοπικών endpoints
- Ασφαλής διαχείριση tokens

### Ασφάλεια Εκτέλεσης
- Φιλτράρισμα εργαλείων
- Περιβάλλοντα sandbox
- Καταγραφή ελέγχου

## Συμπέρασμα

Τα SLMs ενσωματωμένα με MCP αντιπροσωπεύουν μια αλλαγή παραδείγματος στην ανάπτυξη εφαρμογών AI. Συνδυάζοντας την αποδοτικότητα των μικρών μοντέλων με τη δύναμη των εξωτερικών εργαλείων, οι προγραμματιστές μπορούν να δημιουργήσουν έξυπνα συστήματα που είναι ταυτόχρονα αποδοτικά σε πόρους και εξαιρετικά ικανά.

Η υλοποίηση του πελάτη MCP Phi-4 δείχνει πώς μπορεί να επιτευχθεί αυτή η ενσωμάτωση στην πράξη, παρέχοντας μια σταθερή βάση για την ανάπτυξη εξελιγμένων εφαρμογών με δυνατότητες AI.

Κύρια σημεία:
- Το MCP γεφυρώνει το χάσμα μεταξύ γλωσσικών μοντέλων και εξωτερικών συστημάτων
- Τα SLMs προσφέρουν αποδοτικότητα χωρίς να θυσιάζουν τη λειτουργικότητα όταν ενισχύονται με εργαλεία
- Η αρθρωτή αρχιτεκτονική επιτρέπει εύκολη επέκταση και προσαρμογή
- Η σωστή διαχείριση σφαλμάτων και τα μέτρα ασφαλείας είναι απαραίτητα για χρήση σε παραγωγή

Αυτό το σεμινάριο παρέχει τη βάση για την ανάπτυξη δικών σας εφαρμογών MCP με SLM, ανοίγοντας δυνατότητες για αυτοματοποίηση, επεξεργασία δεδομένων και ενσωμάτωση έξυπνων συστημάτων.

---

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτοματοποιημένες μεταφράσεις ενδέχεται να περιέχουν σφάλματα ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.